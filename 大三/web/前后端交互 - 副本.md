---
title: 
date: 2024-10-17 22:00:00 +0800
categories: [, ]
tags: [,]
---

# 8. HTTP,RESTful API,Token,GraphQL

获取所有文章

Http GET

互联网--邮政系统

URL 网站 --信封的地址，这封信去哪。

> https://example.com/api/v1/users/123
>
> example.com 大厦
>
> api 区域的
>
> v1号楼
>
> users123 编号123

http动词 **http verbs**：就是你写在信封最醒目的位置的指令或者是行动目的。它会告诉快递员以及收件人--你想对这个地址上做什么

这些指令叫做http动词

关于http和https。现在都是https（secure），加密了比较安全

**http的核心CRUD**

1. **GET 获取**
2. **POST 创建**
3. **PUT 更新/替换**
4. **DELETE 删除**
5. **PATCH 局部更新，替换档案...**

**返回码status**

200成功

500服务器错误



获取所有文章

/api/v1/posts   *<u>GET</u>*

获取单篇文章，id是42

/api/v1/posts/42  *<u>GET</u>*

创建新的文章

/api/v1/posts  *<u>POST</u>*

更新，删除

/api/v1/posts/42  *<u>PUT/PATCH</u>*

/api/v1/posts/42   *<u>DELETE</u>*

**实际开发中，只用GET和POST。剩下2个基于不用，不安全。物理删除隐患大。基本采用软删除（soft delete）**。

实际删除举例：

/api/v1/posts/update  *<u>POST</u>*

/api/v1/posts/delete  *<u>POST</u>*

实际上使用的是post，将源文件标记为删除状态即可。

在简单支付系统中：

支付过后，数据库里面标记为paid

/api/orders/pay/456-->paid

/api/orders/456/cancel



中间人攻击

补充：cookie和session可能被劫持篡改，cookie被劫持相当于别人拿到了你身份证，然后去干坏事。

所有现在web程序基本没有用cookie和session，不安全。

现在都是token，令牌

以前JWT JSON WEB TOKEN



https转递

-请求行

-请求头

​	HOST

​	Content-Type：application/json

​	Accept：Application/json

​	Authoritarian：token...

-请求体

​	正文

/api/v1/posts/create

后端解析json即可。



补充：

**授权协议 OAuth 2.0**

1. 访问令牌 JWT
2. 刷新令牌

**认证协议 OpenID connect OIDC**

授权协议只管你有没有对应的令牌，不会验证令牌的持有人身份。

解决我是谁的问题

ID TOKEN

TOKEN组合拳，3步。

JWP

授权

验证

只有第一个称为单点登陆。



一直到2014年

## 全面爆发时期 2015年-至今

代表：React Vue.js，Node.js，Angular



**GraphQL**

解决了RESTful API的一些问题。

**数据过载**

用户要访问一些数据，但是RESTful API调用了很多的API。而有的API其实不需要调用，无效调用

比如前端访问一个用户的email，后端把所有用户的json都返回了。

用户要一个信息，RESTful API会把所有数据都返回，调用了好多API，造成资源的浪费。

GraphQL解决了整个问题，写你需要的信息，只返回你要的信息。

- RESTful API：被动。主要是后端来定义数据的结构
- GraphQL：一次请求，即可获取所需的信息。



趋势：**前端工程化**

三驾马车

包管理器：NPM，Yarn

构建工具：webpack

​		  并行开发，技术栈考验独立演进，职责边界变得清晰。.js .css

框架，库

编译器/转译器：ESMAScript标准（类似于C11标准）
